<html>

<head>
    <title>Webpage Indexing Tracker</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/index.css')}}">
</head>

<body>
    <div class="container">
        <div class="title-container">
            <h1>Webpage Indexing Tracker</h1>
        </div>
        <div class="form-container">
            <h2> Upload Sitemaps</h2>
            <form action="/check" method="post" enctype="multipart/form-data">
            
                <div>
                    <label for="max-search-count">Proxy File</label>
                    <input class="max-search-count text-input" type="file" min="1" max="100" value="2"
                        name="proxy-file" placeholder="100" required
                        title="A file with proxies for checking (seperate by newline)">
                </div>

                <input class="submit-button" type="submit" value="Start"
                    title="Starts the Url hunt and checks for indexing based on set count.">
            </form>

            <div class="link-to-sheet">
                <a href="{{url_to_sheets}}" target="_blank"> Open Sheets</a>
            </div>
        </div>
        <div id="progress-container" class="progress-container">
            <div class="progress-text">
                <pre id="progress"></pre>
            </div>

        </div>

    </div>

    <script>
        var res;
        setInterval(async () => {
            res = await fetch("http://" + document.domain + ":" + location.port + "/api");
            text = await res.text();
            text_as_json = JSON.parse(text);
            if (text_as_json["progress"] != "")
                document.getElementById("progress").innerHTML = text_as_json["progress"];

        }, 20000)

    </script>

</body>

</html>